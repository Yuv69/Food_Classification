<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriVision - AI Food Recognition & Nutrition Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 50%, #10b981 100%);
        }
        .dark-gradient {
            background: linear-gradient(135deg, #1f2937 0%, #111827 50%, #0f172a 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .dark-glass {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .hover-scale {
            transition: all 0.3s ease;
        }
        .hover-scale:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.3);
        }
        .drop-zone {
            transition: all 0.3s ease;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%);
            border: 2px dashed rgba(139, 92, 246, 0.4);
        }
        .drop-zone.dragover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(16, 185, 129, 0.3) 100%);
            border-color: #8b5cf6;
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.4);
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }
            50% { box-shadow: 0 0 30px rgba(16, 185, 129, 0.5); }
        }
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        .glow-animation {
            animation: glow 2s ease-in-out infinite;
        }
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #8b5cf6;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .feature-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .feature-card:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.1) 100%);
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        .nav-glass {
            background: rgba(17, 24, 39, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Navigation -->
    <nav class="nav-glass sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <i class="fas fa-leaf text-3xl text-emerald-400 mr-3 glow-animation"></i>
                    <span class="text-2xl font-bold gradient-bg bg-clip-text text-transparent">NutriVision</span>
                </div>
                <div class="flex space-x-6">
                    <a href="#home" class="text-gray-300 hover:text-emerald-400 transition duration-300">Home</a>
                    <a href="#features" class="text-gray-300 hover:text-purple-400 transition duration-300">Features</a>
                    <a href="#upload" class="text-gray-300 hover:text-cyan-400 transition duration-300">Analyze</a>
                    <a href="/compare" class="text-gray-300 hover:text-pink-400 transition duration-300">Compare</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="gradient-bg py-32 relative overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-20"></div>
        <div class="container mx-auto px-6 text-center relative z-10">
            <h1 class="text-5xl md:text-7xl font-bold mb-6 float-animation text-white drop-shadow-2xl">
                AI-Powered Food Recognition
            </h1>
            <p class="text-xl md:text-2xl mb-8 opacity-90 text-gray-100">
                Instantly identify food and get detailed nutritional information using advanced AI
            </p>
            <a href="#upload" class="glass-effect text-white px-8 py-4 rounded-full font-semibold text-lg hover-scale inline-block shadow-2xl glow-animation">
                Start Analyzing <i class="fas fa-arrow-right ml-2"></i>
            </a>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-20 dark-gradient">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12 text-white">Why Choose NutriVision?</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="feature-card p-8 rounded-xl hover-scale text-center">
                    <div class="w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 glow-animation">
                        <i class="fas fa-camera text-3xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-semibold mb-3 text-white">Instant Recognition</h3>
                    <p class="text-gray-300">Upload a photo and get instant food identification powered by YOLOv8</p>
                </div>
                <div class="feature-card p-8 rounded-xl hover-scale text-center">
                    <div class="w-20 h-20 bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-full flex items-center justify-center mx-auto mb-4 glow-animation">
                        <i class="fas fa-chart-pie text-3xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-semibold mb-3 text-white">Detailed Nutrition</h3>
                    <p class="text-gray-300">Get comprehensive nutritional breakdown including macros and vitamins</p>
                </div>
                <div class="feature-card p-8 rounded-xl hover-scale text-center">
                    <div class="w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 glow-animation">
                        <i class="fas fa-balance-scale text-3xl text-white"></i>
                    </div>
                    <h3 class="text-2xl font-semibold mb-3 text-white">Compare Foods</h3>
                    <p class="text-gray-300">Compare nutritional values between different foods side by side</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Upload Section -->
    <section id="upload" class="py-20 bg-gray-800">
        <div class="container mx-auto px-6">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12 text-white">Analyze Your Food</h2>
            <div class="max-w-2xl mx-auto">
                <div id="dropZone" class="drop-zone rounded-2xl p-12 text-center cursor-pointer">
                    <i class="fas fa-cloud-upload-alt text-6xl text-purple-400 mb-4 glow-animation"></i>
                    <p class="text-xl text-gray-300 mb-2">Drag & Drop your food image here</p>
                    <p class="text-gray-400 mb-4">or</p>
                    <button class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition shadow-lg">
                        Browse Files
                    </button>
                    <input type="file" id="fileInput" class="hidden" accept="image/*">
                    <p class="text-sm text-gray-400 mt-4">Supported formats: JPG, PNG, GIF, WebP (Max 10MB)</p>
                </div>
                
                <!-- Preview Area -->
                <div id="previewArea" class="hidden mt-8">
                    <div class="dark-glass rounded-xl shadow-2xl p-6">
                        <img id="previewImage" class="w-full h-64 object-cover rounded-lg mb-4 shadow-lg">
                        <div class="flex justify-between items-center">
                            <span id="fileName" class="text-gray-300"></span>
                            <div class="space-x-3">
                                <button id="cancelBtn" class="px-4 py-2 bg-gray-600 text-gray-300 rounded-lg hover:bg-gray-700 transition">
                                    Cancel
                                </button>
                                <button id="analyzeBtn" class="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition shadow-lg">
                                    <i class="fas fa-search mr-2"></i>Analyze Food
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Loading Area -->
                <div id="loadingArea" class="hidden mt-8">
                    <div class="dark-glass rounded-xl shadow-2xl p-8 text-center">
                        <div class="loading-spinner mx-auto mb-4"></div>
                        <p class="text-lg text-gray-300">Analyzing your food...</p>
                        <p class="text-sm text-gray-400">This may take a few seconds</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-20 dark-gradient">
        <div class="container mx-auto px-6">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl md:text-5xl font-bold mb-8 text-white">About NutriVision</h2>
                <p class="text-lg text-gray-300 mb-8">
                    NutriVision uses cutting-edge YOLOv8 computer vision technology to instantly recognize food items 
                    from your photos. Our AI model has been trained on thousands of food images and can accurately 
                    identify popular dishes including sushi, bibimbap, apple pie, tiramisu, and many more.
                </p>
                <div class="grid md:grid-cols-2 gap-8 text-left">
                    <div class="dark-glass p-6 rounded-xl">
                        <h3 class="text-2xl font-semibold mb-4 text-purple-400">Supported Foods</h3>
                        <ul class="space-y-2 text-gray-300">
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Sushi</li>
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Bibimbap</li>
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Apple Pie</li>
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Tiramisu</li>
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Cannoli</li>
                        </ul>
                    </div>
                    <div class="dark-glass p-6 rounded-xl">
                        <h3 class="text-2xl font-semibold mb-4 text-cyan-400">More Foods</h3>
                        <ul class="space-y-2 text-gray-300">
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Edamame</li>
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Falafel</li>
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>French Toast</li>
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Ice Cream</li>
                            <li><i class="fas fa-check text-emerald-400 mr-2"></i>Ramen</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black py-12">
        <div class="container mx-auto px-6 text-center">
            <div class="flex items-center justify-center mb-4">
                <i class="fas fa-leaf text-3xl text-emerald-400 mr-3 glow-animation"></i>
                <span class="text-2xl font-bold gradient-bg bg-clip-text text-transparent">NutriVision</span>
            </div>
            <p class="text-gray-400 mb-4">AI-Powered Food Recognition & Nutrition Analysis</p>
            <p class="text-sm text-gray-500">&copy; 2024 NutriVision. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // File upload functionality
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const previewArea = document.getElementById('previewArea');
        const previewImage = document.getElementById('previewImage');
        const fileName = document.getElementById('fileName');
        const cancelBtn = document.getElementById('cancelBtn');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const loadingArea = document.getElementById('loadingArea');

        let selectedFile = null;

        // Click to browse files
        dropZone.addEventListener('click', () => {
            fileInput.click();
        });

        // Drag and drop functionality
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileSelect(files[0]);
            }
        });

        // File input change
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileSelect(e.target.files[0]);
            }
        });

        function handleFileSelect(file) {
            // Validate file type
            const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];
            if (!allowedTypes.includes(file.type)) {
                alert('Please select a valid image file (JPG, PNG, GIF, BMP, WebP)');
                return;
            }

            // Validate file size (10MB)
            if (file.size > 10 * 1024 * 1024) {
                alert('File size must be less than 10MB');
                return;
            }

            selectedFile = file;
            
            // Show preview
            const reader = new FileReader();
            reader.onload = (e) => {
                previewImage.src = e.target.result;
                fileName.textContent = file.name;
                previewArea.classList.remove('hidden');
                dropZone.classList.add('hidden');
            };
            reader.readAsDataURL(file);
        }

        // Cancel button
        cancelBtn.addEventListener('click', () => {
            selectedFile = null;
            previewArea.classList.add('hidden');
            dropZone.classList.remove('hidden');
            fileInput.value = '';
        });

        // Analyze button
        analyzeBtn.addEventListener('click', () => {
            if (!selectedFile) return;

            const formData = new FormData();
            formData.append('file', selectedFile);

            // Show loading
            previewArea.classList.add('hidden');
            loadingArea.classList.remove('hidden');

            fetch('/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = data.redirect;
                } else {
                    alert('Error: ' + data.error);
                    loadingArea.classList.add('hidden');
                    previewArea.classList.remove('hidden');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while uploading the file');
                loadingArea.classList.add('hidden');
                previewArea.classList.remove('hidden');
            });
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Auto-scroll to upload section if specified
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('scroll_to') === 'upload') {
                const uploadSection = document.getElementById('upload');
                if (uploadSection) {
                    uploadSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            }
        });
    </script>
</body>
</html>